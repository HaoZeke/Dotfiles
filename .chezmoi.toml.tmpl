{{- $email := "" -}}
{{- if (hasKey . "email") -}}
{{-   $email = .email -}}
{{- else -}}
{{-   $email = promptString "email" -}}
{{- end -}}

{{- $display_manager := "" -}}
{{- if (hasKey . "display_manager") -}}
{{-   $display_manager = .display_manager -}}
{{- else -}}
{{-   $display_manager = promptString "display_manager" -}}
{{- end -}}

{{- $name := "" -}}
{{- if (hasKey . "name") -}}
{{-   $name = .name -}}
{{- else -}}
{{-   $name = promptString "name" -}}
{{- end -}}

{{- $encrypted := "" -}}
{{- if (hasKey . "encrypted") -}}
{{-   $encrypted = .encrypted -}}
{{- else -}}
{{-   $encrypted = promptString "encrypted" -}}
{{- end -}}
[data]
    email = {{ $email | quote }}
    name = {{ $name | quote }}
    display_manager = {{ $display_manager | quote }}
{{ if eq $encrypted "yes" }}    encrypted = "yes"{{ end }}
{{ if eq $encrypted "yes" }}    encryption = "age"
[age]
    identity = {{ joinPath .chezmoi.homeDir "key.txt" | quote }}
    recipient = "age1m7vsksv6cktqfzlqshwxs0856mlshz8540c678dl9rklrr2jjunql48lw7"
{{ end }}

{{ if eq .chezmoi.os "darwin" }}


{{- $mmanager := "" -}}
{{- if (hasKey . "mmanager") -}}
{{-   $mmanager = .mmanager -}}
{{- else -}}
{{-   $mmanager = promptString "mmanager (brew, nix)" -}}
{{- end -}}
# [data]
    mmanager = {{ $mmanager | quote }}
{{ end }}

# Local Variables:
# mode: conf-toml
# End:
