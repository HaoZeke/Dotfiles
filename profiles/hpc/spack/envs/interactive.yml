spack:
  packages:
    nix:
      version: [2.3.10]
      variants: |
        storedir=__[base_home]__/nix/store statedir=__[base_home]__/nix/var doc=False sandboxing=False
  definitions:
    - compilers: ['gcc@10.2.0']
    - packages: [
      'zsh', 'tmux', 'git',
      'gmp', 'mpfr',
      'mpc', 'perl', 'cmake',
      'pcre', 'jq', 'patch',
      'ncurses', 'texinfo', 'zlib',
      # Nix
      'libseccomp', 'bdw-gc', 'brotli', 'libsodium',
      'libcpuid', 'googletest', 'nlohmann-json', 'openssl',
      'bison', 'flex', 'boost+coroutine+context cxxstd=17', 'xz', 'libarchive',
      'curl', 'libxml2', 'autoconf', 'pkgconf', 'm4',
      'autogen', 'automake', 'autoconf-archive', 'libtool',
      'bzip2', 'sqlite', 'editline', 'pkg-config', 'automake'
      ]
  specs:
    - $compilers
    # - 'subversion%gcc@9.3.0'
    - matrix:
       - [$packages]
       - [$%compilers]
  view: true
